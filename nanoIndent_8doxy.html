<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ExperimetalMicromechanics: src/nanoIndent.doxy File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%">
 <tbody>
 <tr style="height: 56px;">
  <td>
   <div id="projectname"> <!--ExperimetalMicromechanics--> <center> Python for Experimental Micromechanics </center>
    <!-- Version: 1--> 
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">nanoIndent.doxy File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Tutorials for nanoindentation analysis. </p>
<h1><a class="anchor" id="overviewIndent"></a>
Overview</h1>
<p>UNITS: one HAS TO use units: [mN], [um], [GPa] (force, length, stress) in this code (any nanoindentation code), since the area function is unit-dependent</p>
<h1><a class="anchor" id="tutorialsBasic"></a>
Basic tutorials for G200 and Hysitron</h1>
<h2><a class="anchor" id=""></a>
</h2>
<pre class="fragment">&gt;&gt;&gt; from nanoIndent import Tip, Indentation
&gt;&gt;&gt; tip = Tip([2.4725e+001,4.7739e+002,-3.2229e+003,3.5580e+003,"iso" ], 1000.0/9176606.1886)
&gt;&gt;&gt; i = Indentation("../Examples/Agilent/ISO.xls", nuMat=0.2, tip=tip)
=============  ../Examples/Agilent/ISO.xls  ============
     Displacement Into Surface      : h
     Load On Sample                 : p
     Time On Sample                 : t
     Stiffness                      : slope
     Modulus                        : modulus
     Hardness                       : hardness
     Contact Area                   : A_c
     Contact Depth                  : h_c
 *** Abs Val dPdt                   NOT USED
 *** dPdt                           NOT USED
     Frame Stiffness                : frameStiffness
     Load vs Disp Slope             : pVsHSlope
 *** Max Load                       NOT USED
 *** Points In Stiffness Fit        NOT USED
     Raw Displacement               : hRaw
     Raw Load                       : pRaw
     Reduced Modulus                : modulusRed
 *** Segment Number                 NOT USED
 *** Segment Type                   NOT USED
     Stiffness Squared Over Load    : k2p
     Support Spring Stiffness       : slopeSupport
     Time                           : tTotal
     X Position                     : xCoarse
     Y Position                     : yCoarse
&gt;&gt;&gt; i.nuMat = 0.2
&gt;&gt;&gt; i.plot()                                        
&gt;&gt;&gt; i.verifyReadCalc(plot=False)
Error in hc: 0.000e+00 % between 3.365e-01 and 3.365e-01
Error in Ac: 9.976e-04 % between 2.916e+00 and 2.916e+00
Error in E*: 4.988e-04 % between 1.206e+02 and 1.206e+02
Error in E:  1.087e-02 % between 1.294e+02 and 1.294e+02
Error in H:  9.976e-04 % between 6.890e+00 and 6.890e+00
&gt;&gt;&gt; #calculate stiffness for single point and compare with reference
&gt;&gt;&gt; S,_,_,_ = i.stiffnessFromUnloading(i.p, i.h, plot=False)
Number of unloading segments:1  Method:Method.ISO
&gt;&gt;&gt; print("Error: %.2e"%((i.slope[0] - S[0])/S[0]))
Error: -3.23e-04</pre><ul>
<li>error is &lt;&lt;1%; errors are small compared to the values itself</li>
<li>plot=True, will give more information on plotting</li>
</ul>
<p>Please note:</p><ul>
<li>no data collected during drift segment (only at the start and end)</li>
<li>in Examples there is the method-file to every Agilent file. Agilent file gives data, Method file tip calibration</li>
</ul>
<p>Information on the tip can be obtained by:</p><ul>
<li>Tip-&gt;Print preview of configuration: that data does include a wrong/imcomplete compliance</li>
<li>Method-&gt;Print Preview-&gt;Detailed: there is a "Indenter Tip" section, which gives the correct data</li>
</ul>
<h2><a class="anchor" id=""></a>
</h2>
<pre class="fragment">&gt;&gt;&gt; from nanoIndent import Tip, Indentation
&gt;&gt;&gt; i = Indentation("../Examples/Hysitron/Exp-50mN_0000.hld")      #tip data stored in file
Open Hysitron file: ../Examples/Hysitron/Exp-50mN_0000.hld
&gt;&gt;&gt; i.analyse()                                            #data reading (command before), separeted from calculation to allow for adoptation of nu inbetween
Number of unloading segments:1  Method:Method.ISO
&gt;&gt;&gt; i.plot()                                                    
&gt;&gt;&gt; i.verifyReadCalc(plot=False)  #possible but senseless since hC,E data not in file
Error in hc: 0.000e+00 % between 3.306e-01 and 3.306e-01
Error in Ac: 0.000e+00 % between 1.632e+00 and 1.632e+00
Error in E*: 0.000e+00 % between 1.064e+02 and 1.064e+02
Error in E:  0.000e+00 % between 1.067e+02 and 1.067e+02
Error in H:  0.000e+00 % between 3.068e+01 and 3.068e+01</pre><h2><a class="anchor" id=""></a>
</h2>
<p>area function = 24.5, -3.7003e1, 5.2827e4, -2.8535e5, 4.8121e5, -2.4060e5 compliance = 3,42 nm/mN.....t = Tip(compliance=3.42/1e3) </p><pre class="fragment">&gt;&gt;&gt; from nanoIndent import Tip, Indentation
&gt;&gt;&gt; i = Indentation("../Examples/Hysitron/RobinSteel0000LC.txt")      #tip data NOT stored in file
Open Hysitron file: ../Examples/Hysitron/RobinSteel0000LC.txt
&gt;&gt;&gt; i.analyse()
Number of unloading segments:1  Method:Method.ISO
&gt;&gt;&gt; i.plot()                                                    
</pre><h2><a class="anchor" id=""></a>
</h2>
<p>Shape function of tip is unknown </p><pre class="fragment">&gt;&gt;&gt; from nanoIndent import Indentation
&gt;&gt;&gt; i   = Indentation("../Examples/Agilent/CSM.xls", nuMat=0.18)
=============  ../Examples/Agilent/CSM.xls  ============
        Displacement Into Surface      : h
        Load On Sample                 : p
        Time On Sample                 : t
        Harmonic Contact Stiffness     : slope
        Hardness                       : hardness
        Modulus                        : modulus
        Contact Area                   : A_c
        Contact Depth                  : h_c
    *** CSM Status                     NOT USED
        Harmonic Displacement          : hHarmonic
    *** Harmonic Frequency             NOT USED
        Harmonic Load                  : pHarmonic
        Harmonic Stiffness             : slopeInvalid
        Load vs Disp Slope             : pVsHSlope
        Phase Angle                    : phaseAngle
        Raw Displacement               : hRaw
        Raw Load                       : pRaw
        Reduced Modulus                : modulusRed
        Stiffness Squared Over Load    : k2p
        Support Spring Stiffness       : slopeSupport
        Time                           : tTotal
        X Position                     : xCoarse
        Y Position                     : yCoarse
Tagged  ['Test 025 Tagged']
&gt;&gt;&gt; i.nuMat = 0.3
&gt;&gt;&gt; i.plotTestingMethod()               #can be used for all        
&gt;&gt;&gt; i.plot()                            #CSM: no unloading is plotted    </pre><ul>
<li>and repeat this for all sheets in the excel file, by executing i.nextTest and i.compareReadCalc again</li>
<li>Allow plotting in verifyReadCalc by omiting plot=False</li>
</ul>
<h2><a class="anchor" id="exampleCalibration"></a>
Example: Calibration using MicroMaterials indentations</h2>
<p>Use a zip file of multiple indentations </p><pre class="fragment">&gt;&gt;&gt; from nanoIndent import Tip, Indentation
&gt;&gt;&gt; i = Indentation("../Examples/Micromaterials/multipleIndentations.zip", nuMat=0.17,verbose=1)
&gt;&gt;&gt; i.calibration()                 #rounding differences can occur </pre><p> Typical values are:</p><ul>
<li>fit f(x)= 0.03556 *x+ 0.00054</li>
<li>frame stiffness: 1866 mN/um = 1.87e+06 N/m</li>
<li>error in %: 2.04</li>
<li>Info: difference direct-indirect stiffness in % 0.33</li>
<li>Should be small</li>
<li>iterated prefactors [30.0, 1115.6, 81989.1]</li>
<li>standard error [1.13, 2578.27, 45269.4] Use i.calibration(plotStiffness=True,plotTip=True) for plotting</li>
</ul>
<h2><a class="anchor" id="exampleBasicPopin"></a>
Example: Read G200 data and determine pop-in for all tests in file</h2>
<pre class="fragment">&gt;&gt;&gt; from nanoIndent import Indentation
&gt;&gt;&gt; i = Indentation("../Examples/Agilent/Popin.xls")
=============  ../Examples/Agilent/Popin.xls  ============
 *** Segment                        NOT USED
     Displacement Into Surface      : h
     Load On Sample                 : p
     Time On Sample                 : t
     Harmonic Contact Stiffness     : slope
     Hardness                       : hardness
     Modulus                        : modulus
&gt;&gt;&gt; while(len(i.testList)&gt;0):
...   fPopIn, certainty = i.popIn(plot=False)
...   print(round(fPopIn,3),round(certainty["deltaSlope"],1))
...   void = i.nextAgilentTest()
0.346 14.7
0.389 13.6
0.352 12.2
0.358 13.1
0.215 11.9
0.38 12.5
0.464 13.7
0.341 -1.0
0.537 18.5
0.229 11.7
0.537 17.6</pre><p> One value has a negative difference in slope and is not dependable. Use plt.plot to plot the functions.</p>
<h1><a class="anchor" id="exampleDataFrame"></a>
looping through all tests and using dataframes</h1>
<pre class="fragment">&gt;&gt;&gt; import pandas as pd
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; df = pd.DataFrame()
&gt;&gt;&gt; from nanoIndent import Tip, Indentation
&gt;&gt;&gt; tip = Tip([2.4725e+001,4.7739e+002,-3.2229e+003,3.5580e+003,"iso" ], 1000.0/9176606.1886)
&gt;&gt;&gt; i = Indentation("../Examples/Agilent/ISO.xls", nuMat=0.2, tip=tip)
=============  ../Examples/Agilent/ISO.xls  ============
        Displacement Into Surface      : h
        Load On Sample                 : p
        Time On Sample                 : t
        Stiffness                      : slope
        Modulus                        : modulus
        Hardness                       : hardness
        Contact Area                   : A_c
        Contact Depth                  : h_c
    *** Abs Val dPdt                   NOT USED
    *** dPdt                           NOT USED
        Frame Stiffness                : frameStiffness
        Load vs Disp Slope             : pVsHSlope
    *** Max Load                       NOT USED
    *** Points In Stiffness Fit        NOT USED
        Raw Displacement               : hRaw
        Raw Load                       : pRaw
        Reduced Modulus                : modulusRed
    *** Segment Number                 NOT USED
    *** Segment Type                   NOT USED
        Stiffness Squared Over Load    : k2p
        Support Spring Stiffness       : slopeSupport
        Time                           : tTotal
        X Position                     : xCoarse
        Y Position                     : yCoarse
&gt;&gt;&gt; i.plot()                                    
&gt;&gt;&gt; print("All tests remaining in file: ",i.testList)
All tests remaining in file:  ['Test 024', 'Test 023', 'Test 022', 'Test 021', 'Test 020', 'Test 019', 'Test 018', 'Test 017', 'Test 016', 'Test 015', 'Test 014', 'Test 013', 'Test 012', 'Test 011', 'Test 010', 'Test 009', 'Test 008', 'Test 007', 'Test 006', 'Test 005', 'Test 004', 'Test 003', 'Test 002', 'Test 001']
&gt;&gt;&gt; print("Meta information",i.meta)
Meta information {'Test': 25.0, 'Percent To Unload': 90, 'Surface Approach Velocity': 10, 'Depth Limit': 400, 'Delta X For Finding Surface': -50, 'Delta Y For Finding Surface': -50, 'Strain Rate Target': 0.05, 'Allowable Drift Rate': 0.05, 'Perform Drift Test Segment': 1.0, 'Approach Distance To Store': 1000, 'Peak Hold Time': 10, 'Surface Approach Distance': 1000, 'Surface Approach Sensitivity': 25, 'Poissons Ratio': 0.2}
&gt;&gt;&gt; df = df.append(i.getDataframe())
&gt;&gt;&gt; while True:
...   df = df.append(i.getDataframe())
...   if len(i.testList)==0:
...     break
...   success = i.nextAgilentTest()
&gt;&gt;&gt; k2p = df['S_mN/um']**2/df['pMax_mN']
&gt;&gt;&gt; print('Mean and standard deviation:',round(np.mean(k2p)),round(np.std(k2p)))
Mean and standard deviation: 2575.0 77.0</pre><p> For Copper the K2P value is ~2500GPa while for Fused silica it is ~660GPa.</p>
<h1><a class="anchor" id="Verification"></a>
Short verification methods of Oliver-Pharr Method</h1>
<p>in addition to the ones mentioned before </p>
<h2><a class="anchor" id="example5"></a>
Example: Verify methods</h2>
<p>By comparison to agilent evaluation </p><pre class="fragment">&gt;&gt;&gt; from nanoIndent import Indentation
&gt;&gt;&gt; i = Indentation("")
&gt;&gt;&gt; i.verifyOneData()
Test CSM method, and area functions (normal and inverse)
    Set Poisson's ratio 0.35
    From Agilent software
        harmStiff   = 159111.704268288 N/m
        load        = 0.49129786514433 mN
        totalDepth  = 111.901346020458 nm
        H           = 0.82150309678705 GPa
        E           = 190.257729329881 GPa
        redE        = 182.338858733495 GPa
        Stiffness Squared Over Load=51529.9093101531 GPa
        ContactArea = 598047.490101769 nm^2
    Evaluated by this python method
        reducedModulus [GPa] = 182.3388   with error= -0.0 %
        ContactArea    [um2] = 0.598   with error= 0.0 %
        Youngs Modulus [GPa] = 190.2893   with error= 0.0166 %
        By using inverse methods: total depth h= 0.11117245742028194 [um]  with error= -0.0 %
End Test
&gt;&gt;&gt; i.verifyOneData1()
Test CSM method, and area functions (normal and inverse)
    Set Poisson's ratio 0.18
    From Agilent software
        harmContactStiff = 25731.8375827836 N/m
        load             = 0.987624311132669 mN
        totalDepth       = 88.2388854303261 nm
        H           = 10.0514655820034 GPa
        E           = 75.1620054287519 GPa
        Stiffness Squared Over Load=670.424429535749 GPa
        Youngs Modulus [GPa] = 75.16652115125679   with error= 0.006 %
        By using inverse methods: total depth h= 0.0882388854304175 [um]  with error= 0.0 %
End Test</pre><p>Notes on plotAsDepth:</p><ul>
<li>does not really make sense for only one unloading but nice if multiple unloading segemnts exist</li>
<li>allows also Hardness, Stiffness, .... (see its documentation for all options)</li>
</ul>
<p>Notes:</p><ul>
<li>if you add "plot=True" to the line "i = Indent", then there will be nice plots</li>
<li>comparing these results to the results of Hysitron:<ul>
<li>differences in S and P are small &lt;0.5%</li>
<li>differences in depths and reducedModulus are ok ~1% (Hysitron uses drift correction, not implemented yet)</li>
<li>differences in H and A are large ~2% (since depend on h^2)</li>
</ul>
</li>
<li>Hysitron issues:<ul>
<li>use the default .hld file</li>
<li>reports a Youngs modulus even if area undefined</li>
</ul>
</li>
<li>Remaining questions<ul>
<li>seems not to do any drift correction</li>
<li>0.011mN seems to be noise in force signal (seems to depend on applied force)</li>
<li>how does Hysitron calibrate tips</li>
<li>how does Hysitron calibrate stiffness</li>
<li>how drift is calculated: use fitting line to data, OR, connect first and last data point</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="tutorialsAgilent"></a>
Agilent advanced examples</h1>
<h2><a class="anchor" id="example0"></a>
Example: Tare time, depth, force</h2>
<p>calculate depth, force and timeOnSample from raw data by identifying surface, drift-rate, ... </p><pre class="fragment">&gt;&gt;&gt; from nanoIndent import Indentation, Tip
&gt;&gt;&gt; tip = Tip([2.4725e+001,4.7739e+002,-3.2229e+003,3.5580e+003,"iso" ], 1000.0/9176606.1886)
&gt;&gt;&gt; i = Indentation("../Examples/Agilent/ISO.xls", nuMat=0.2, tip=tip)
=============  ../Examples/Agilent/ISO.xls  ============
     Displacement Into Surface      : h
     Load On Sample                 : p
     Time On Sample                 : t
     Stiffness                      : slope
     Modulus                        : modulus
     Hardness                       : hardness
     Contact Area                   : A_c
     Contact Depth                  : h_c
 *** Abs Val dPdt                   NOT USED
 *** dPdt                           NOT USED
     Frame Stiffness                : frameStiffness
     Load vs Disp Slope             : pVsHSlope
 *** Max Load                       NOT USED
 *** Points In Stiffness Fit        NOT USED
     Raw Displacement               : hRaw
     Raw Load                       : pRaw
     Reduced Modulus                : modulusRed
 *** Segment Number                 NOT USED
 *** Segment Type                   NOT USED
     Stiffness Squared Over Load    : k2p
     Support Spring Stiffness       : slopeSupport
     Time                           : tTotal
     X Position                     : xCoarse
     Y Position                     : yCoarse
&gt;&gt;&gt; i.tareDepthForce(compareRead=True)
Drift rate: 0.037 nm/s
Error in h: 0.06%
Error in p: 0.01%
Error in t: 0.01%
&gt;&gt;&gt; i.tareDepthForce(compareRead=False,plot=True)
</pre><h2><a class="anchor" id="example1"></a>
Example: Read G200 xls file and plot sum, don't specify indenter because not important for analysis of existing data</h2>
<pre class="fragment">&gt;&gt;&gt; from nanoIndent import Indentation
&gt;&gt;&gt; i = Indentation("../Examples/Agilent/CSM.xls", nuMat=0.18)
=============  ../Examples/Agilent/CSM.xls  ============
        Displacement Into Surface      : h
        Load On Sample                 : p
        Time On Sample                 : t
        Harmonic Contact Stiffness     : slope
        Hardness                       : hardness
        Modulus                        : modulus
        Contact Area                   : A_c
        Contact Depth                  : h_c
    *** CSM Status                     NOT USED
        Harmonic Displacement          : hHarmonic
    *** Harmonic Frequency             NOT USED
        Harmonic Load                  : pHarmonic
        Harmonic Stiffness             : slopeInvalid
        Load vs Disp Slope             : pVsHSlope
        Phase Angle                    : phaseAngle
        Raw Displacement               : hRaw
        Raw Load                       : pRaw
        Reduced Modulus                : modulusRed
        Stiffness Squared Over Load    : k2p
        Support Spring Stiffness       : slopeSupport
        Time                           : tTotal
        X Position                     : xCoarse
        Y Position                     : yCoarse
Tagged  ['Test 025 Tagged']
&gt;&gt;&gt; while(len(i.testList)&gt;0):
...   plt.plot(i.h, i.modulus,'b-')                
...   i.nextTest()
&gt;&gt;&gt; plt.xlabel("depth [um]")                       
&gt;&gt;&gt; plt.ylabel("modulus [MPa]")                    
&gt;&gt;&gt; plt.grid()                                     
&gt;&gt;&gt; plt.show()                                     
&gt;&gt;&gt; i = Indentation("../Examples/Agilent/CSM.xls", nuMat=0.18)
=============  ../Examples/Agilent/CSM.xls  ============
        Displacement Into Surface      : h
        Load On Sample                 : p
        Time On Sample                 : t
        Harmonic Contact Stiffness     : slope
        Hardness                       : hardness
        Modulus                        : modulus
        Contact Area                   : A_c
        Contact Depth                  : h_c
    *** CSM Status                     NOT USED
        Harmonic Displacement          : hHarmonic
    *** Harmonic Frequency             NOT USED
        Harmonic Load                  : pHarmonic
        Harmonic Stiffness             : slopeInvalid
        Load vs Disp Slope             : pVsHSlope
        Phase Angle                    : phaseAngle
        Raw Displacement               : hRaw
        Raw Load                       : pRaw
        Reduced Modulus                : modulusRed
        Stiffness Squared Over Load    : k2p
        Support Spring Stiffness       : slopeSupport
        Time                           : tTotal
        X Position                     : xCoarse
        Y Position                     : yCoarse
Tagged  ['Test 025 Tagged']</pre><h1><a class="anchor" id="tutorialsTip"></a>
Indenter Tip Tutorials</h1>
<h2><a class="anchor" id="example6"></a>
Compare indenter shapes</h2>
<pre class="fragment">&gt;&gt;&gt; from nanoIndent import Tip
&gt;&gt;&gt; i = Tip([32.9049, -6418.303798, 288484.8518, -989287.0625, 103588.5588, 675977.3345])
&gt;&gt;&gt; i.plotIndenterShape()                          
&gt;&gt;&gt; i = Tip([5000, 30, "sphere"])
&gt;&gt;&gt; i.plotIndenterShape()                          </pre><p>Compare more tips, and plot </p><pre class="fragment">&gt;&gt;&gt; from nanoIndent import Tip
&gt;&gt;&gt; areaFuncts = [ [24.494, 545053, -152689e3, 2988560000, -10440900000, 7941280000],\
...                [24.5, -274297.571919, 62433198.000404, -1113200937.674743, 3719191096.269505, -2767085026.6648] ]
&gt;&gt;&gt; for idx,areaFunct in enumerate(areaFuncts):
...   i = Tip()
...   i.prefactors = areaFunct+['agilent']
...   if idx==0:                                                            
...     i.plotIndenterShape(show=False, tipLabel="Fit 1")                   
...   else:                                                                 
...     i.plotIndenterShape(tipLabel="Fit 2", fileName="CompareTips.png")   </pre> </div></div><!-- contents -->

<hr class="footer"/><address class="footer"><small>
Copyright by Steffen Brinckmann
<!--Generated on Mon May 18 2020 17:26:25 for ExperimetalMicromechanics by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13 -->
</small></address>
</body>
</html>
